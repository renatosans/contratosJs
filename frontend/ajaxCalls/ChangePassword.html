
<form name="changePassword" method="POST" >
    <label class="left" style="width: 99%;">Usuário<br/>
    <input type="text" name="username" value="" style="width: 98%;height:25px;" />
    </label>

    <label class="left" style="width: 99%;">Antiga senha<br/>
    <input type="password" name="oldPassword" value="" style="width: 98%;height:25px;" />
    </label>

    <label class="left" style="width: 99%;">Nova senha<br/>
    <input type="password" name="newPassword" value="" style="width: 98%;height:25px;" />
    </label>

    <label class="left" style="width: 99%;">Confirmar nova senha<br/>
    <input type="password" name="confirmation" value="" style="width: 98%;height:25px;" />
    </label>
    <div style="clear:both;">
        <br/><br/>
    </div>

    <div class="left" style="width:99%; text-align: center;">
        <button type="submit" id="btnOK" style="width:80px; height:30px;">OK</button>
    </div>
</form>

<script type="text/javascript" >
    function OkButtonClicked() {
        const targetUrl = '/changePassword';
        const form = document.querySelector('form[name="changePassword"]');
        const formData = new FormData(form);
        const data = JSON.stringify(Object.fromEntries(formData.entries()));
        axios.post(targetUrl, data, {headers: {'Content-Type': 'application/json'}}).then( response => { alert(JSON.stringify(response.data)); });

        // Fecha o dialogo
        $("#passwordDialog").dialog('close');
    }

    // Adiciona o evento ao botão do formulário
    $("#btnOK").button({ icons: {primary:'ui-icon-circle-check'} }).click(function() { OkButtonClicked(); });

    // Adiciona a validação aos campos do formulário
    // $("form").validate({rules: { username:"required", oldPassword:"required", newPassword:"required", confirmation:"required" }});
</script>
